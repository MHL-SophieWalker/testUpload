import 'package:hart_suite/models/general/auditable.dart';

class Attachment {
  String? documentId;
  String fileName;
  String fileLocation;
  bool isOnline;
  Auditable? created;
  Auditable? updated;
  Auditable? deleted;

  Attachment({this.documentId, required this.fileName, required this.fileLocation, this.created, this.updated, this.deleted, this.isOnline = false});

  Map<String, dynamic> toMap() {
    return {
      'documentId': documentId,
      'fileName': fileName,
      'fileLocation': fileLocation,
      'created': created?.toMap(),
      'updated': updated?.toMap(),
      'deleted': deleted?.toMap(),
      'isOnline': isOnline
    };
  }

  static Attachment? fromMap(Map<String, dynamic>? map) {
    Attachment? attachment;

    if (map == null || map.isEmpty || map['documentId'] == null) {
      attachment = null;
    } else {
      attachment = Attachment(
          documentId: map.containsKey('documentId') ? map['documentId'] : null,
          fileName: map.containsKey('fileName') ? map['fileName'] : '',
          fileLocation: map.containsKey('fileLocation') ? map['fileLocation'] : '',
          created: map.containsKey('created') ? Auditable.fromMap(map['created']) : null,
          updated: map.containsKey('updated') ? Auditable.fromMap(map['updated']) : null,
          deleted: map.containsKey('deleted') ? Auditable.fromMap(map['deleted']) : null,
          isOnline: map.containsKey('isOnline') ? map['isOnline'] : false);
    }

    return attachment;
  }
}

import 'package:flutter/material.dart';
import 'package:hart_suite/helpers/ui/icon_help.dart';

class ProfileImageDisc extends StatelessWidget {
  final String fullName;
  final String downloadUrl;
  final double diameter;

  const ProfileImageDisc({
    super.key,
    required this.fullName,
    required this.downloadUrl,
    this.diameter = 30,
  });

  @override
  Widget build(BuildContext context) {
    return ClipRRect(
      borderRadius: BorderRadius.circular(1000),
      child: Image.network(
        filterQuality: FilterQuality.high,
        downloadUrl.replaceFirst('image', 'image_54x41'),
        errorBuilder: (context, error, stackTrace) {
          return IconHelp.getIconFromString(
            name: 'account_circle_outlined',
            semanticLabel: fullName,
            size: 35,
          );
        },
        height: diameter,
        width: diameter,
        fit: BoxFit.cover,
      ),
    );
  }
}

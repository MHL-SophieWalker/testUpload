import 'package:flutter/material.dart';
import 'package:hart_suite/style/style_base.dart';

class SidebarAdditionalButton extends StatelessWidget {
  final Function? onPressed;
  final double expandedWidth, collapsedWidth;
  final bool expanded;
  final Widget child;
  final String? tooltipMessage;
  final ButtonStyle? buttonStyle;

  const SidebarAdditionalButton({
    super.key,
    this.onPressed,
    required this.expandedWidth,
    required this.collapsedWidth,
    required this.expanded,
    required this.child,
    this.tooltipMessage,
    this.buttonStyle,
  });

  @override
  Widget build(BuildContext context) {
    Widget widg;

    widg = TextButton(
      style: buttonStyle ?? StyleBase.getTextButtonSidebarStyle(),
      onPressed: onPressed == null ? null : () => onPressed!(),
      child: SizedBox(
        width: expanded ? expandedWidth : collapsedWidth,
        child: child,
      ),
    );

    if (tooltipMessage != null) {
      widg = Tooltip(
        message: tooltipMessage,
        child: widg,
      );
    }

    return widg;
  }
}

import 'package:flutter/material.dart';
import 'package:gap/gap.dart';

class Filterable extends StatefulWidget {
  final Icon leading;
  final Widget title, display;
  final Icon? trailing;
  final Function onTap;

  const Filterable({
    super.key,
    required this.leading,
    required this.title,
    required this.display,
    required this.onTap,
    this.trailing,
  });

  @override
  State<Filterable> createState() => _FilterableState();
}

class _FilterableState extends State<Filterable> {
  @override
  Widget build(BuildContext context) {
    return MouseRegion(
      cursor: SystemMouseCursors.click,
      child: GestureDetector(
        onTap: () {
          widget.onTap();
        },
        child: Card(
          child: Padding(
            padding: const EdgeInsets.all(12),
            child: Row(
              children: [
                Align(
                  alignment: Alignment.centerLeft,
                  child: widget.leading,
                ),
                const Gap(12),
                Expanded(
                  child: Row(
                    mainAxisSize: MainAxisSize.max,
                    children: [
                      Align(
                        alignment: Alignment.centerLeft,
                        child: widget.title,
                      ),
                      Expanded(child: Container()),
                      Align(
                        alignment: Alignment.centerRight,
                        child: widget.display,
                      ),
                    ],
                  ),
                ),
                Align(
                  alignment: Alignment.centerRight,
                  child: widget.trailing ?? const Icon(Icons.chevron_right),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}

import 'package:flutter/material.dart';
import 'package:hart_suite/models/profile/person.dart';
import 'package:hart_suite/widgets/profile/profile_card.dart';

class SettingsProfile extends StatefulWidget {
  final bool expanded;
  final Person user;

  const SettingsProfile({super.key, required this.user, required this.expanded});

  @override
  State<SettingsProfile> createState() => _SettingsProfileState();
}

class _SettingsProfileState extends State<SettingsProfile> {
  late Widget settings;

  @override
  Widget build(BuildContext context) {
    settings = ProfileCard(person: widget.user, showItems: [], expanded: widget.expanded).profileCard;

    return settings;
  }
}

import 'package:flutter/material.dart';
import 'package:hart_suite/views/main/home.dart';

class Four04Page extends StatelessWidget {
  static const route = '/404';
  final Four04Args? args;

  const Four04Page({super.key, this.args});

  @override
  Widget build(BuildContext context) {
    Four04Args fArgs;

    if (args == null) {
      fArgs = ModalRoute.of(context)!.settings.arguments as Four04Args? ?? Four04Args();
    } else {
      fArgs = args!;
    }

    return Scaffold(
      appBar: AppBar(
        leading: !Navigator.canPop(context) ? IconButton(icon: const Icon(Icons.home), onPressed: () => Navigator.pushNamed(context, HomePage.route)) : null,
        title: const Text('404'),
      ),
      body: Center(
        child: Column(
          children: [
            Padding(
              padding: const EdgeInsets.all(12),
              child: Image.asset(
                'assets/images/404.jpeg',
                height: MediaQuery.of(context).size.height * .5,
                scale: 1,
              ),
            ), //sort the size of the image and padding
            const Text('The page you tried to access does not exist.'),
            TextButton(
              onPressed: () => Navigator.pushNamed(context, fArgs.route!, arguments: fArgs.collection),
              child: Text('Return to ${fArgs.page} page.'),
            ),
          ],
        ),
      ),
    );
  }
}

class Four04Args {
  String? page;
  String? route;
  String? collection;

  Four04Args({this.page, this.route, this.collection}) {
    if (page == null || route == null) {
      page = 'Home';
      route = HomePage.route;
    }
  }
}
